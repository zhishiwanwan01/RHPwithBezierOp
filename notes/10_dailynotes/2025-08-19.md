# 2025-08-19 学习笔记

## 今天遇到的技术问题

### [[C++]]
- Q: C++ STL容器中`vector<pair<MSKboundkeye, pair<double, double>>>`这种嵌套模板语法如何理解？
- A: 这是C++模板的嵌套用法。最外层是vector容器，元素类型是pair。第一个pair的第一个元素是MOSEK的边界类型枚举`MSKboundkeye`，第二个元素又是一个pair，包含上下界的double值。可以拆解为：`vector<pair<边界类型, pair<下界值, 上界值>>>`。

- Q: C++ 变量命名中的缩写如何理解和注释？
- A: 应该在代码中添加注释解释缩写的全称，如`con_bdk = constraint boundary key`，`var_bdk = variable boundary key`，`ctrlP_num = control point number`等。这样提高代码可读性。

- Q: MOSEK API中的数据类型命名规律是什么？
- A: MOSEK使用特定的命名约定：`MSK`前缀表示MOSEK库，`boundkeye`中的`key`表示键/类型标识符，`e`后缀表示枚举（enum）。如`MSKboundkeye`表示边界类型枚举。

### [[git]]
- Q: 如何正确初始化和更新git子模块？
- A: 使用`git submodule update --init --recursive`命令。这会：1) 初始化子模块配置，2) 克隆子模块内容，3) 递归处理嵌套子模块。对于DecompROS项目，这样可以拉取DecompUtil库的完整代码。

- Q: 为什么git子模块文件夹为空？
- A: Git子模块是引用外部仓库的机制，只有在执行`git submodule update --init`后才会下载实际内容。空文件夹说明子模块已配置但未初始化。

### [[数学]]
- Q: 贝塞尔轨迹优化中的约束二次规划(CQP)问题如何建模？
- A: 数学形式为：minimize (1/2)x^T*Q*x + c^T*x, subject to: A_eq*x=b_eq (等式约束), A_ineq*x≤b_ineq (不等式约束), lb≤x≤ub (盒约束)。其中x是贝塞尔控制点向量。

- Q: 时间缩放在轨迹优化中的作用？
- A: 不同轨迹段的时间长度不同，需要按时间缩放以保证优化权重一致。缩放公式：Q_scaled = Q / T^(2*order-3)，确保更短时间段不会因为更大导数值而被过度惩罚。

- Q: MOSEK内点法求解器的工作原理？
- A: 内点法通过以下步骤求解：1) 寻找初始可行点，2) 沿中心路径向最优解移动，3) 检查KKT最优性条件，4) 达到收敛精度或检测不可行时终止。

### [[ROS]]
- Q: DecompROS项目的架构组成？
- A: 包含4个主要部分：1) DecompUtil - 核心凸分解库，2) decomp_ros_msgs - ROS消息定义，3) decomp_ros_utils - ROS接口工具，4) decomp_test_node - 测试节点。

### [[MOSEK优化器]]
- Q: Btraj项目使用的MOSEK版本信息？
- A: Btraj使用MOSEK 8.1版本，库文件位于`Btraj/third_party/mosek/lib/mosek8_1/`目录下，包含libmosek64.so.8.1等核心库文件。

- Q: MOSEK边界类型有哪些？
- A: 主要包括：MSK_BK_FX (固定边界), MSK_BK_RA (范围边界), MSK_BK_UP (上界), MSK_BK_LO (下界)。用于定义变量和约束的边界条件。

- Q: MOSEK稀疏矩阵如何存储？
- A: 使用三元组格式(row, col, value)存储非零元素。对于对称矩阵Q，只存储上三角部分以节省内存。通过qsubi[]存储行索引，qsubj[]存储列索引，qval[]存储对应数值。

## 代码注释工作

今天完成了对`trajectory_generator.cpp`文件的详细注释工作，主要添加了：
1. 40+个变量缩写的全称解释
2. MOSEK二次规划求解的7个主要步骤说明
3. 数学公式和物理含义的详细解释

参考: [[代码注释措辞总结]]

## 项目进展

- ✅ 完成Btraj核心文件的中文注释
- ✅ 解决DecompROS子模块初始化问题  
- ✅ 理解MOSEK优化器的工作流程
- 🔄 继续学习Fast-Planner和DecompROS代码结构